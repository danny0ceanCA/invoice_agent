{
  "version": "1.0",
  "last_updated": "2025-12-03",

  "entities": {
    "types": {
      "student": ["student", "kid", "kids", "students", "child", "scholar", "kiddos", "student in care"],
      "clinician": ["clinician", "provider", "nurse", "lpn", "lvn", "hha", "health aide", "caregiver", "care staff", "staff", "employees", "workers", "district staff"],
      "vendor": ["vendor", "company", "agency", "provider group", "external agency", "external contractor", "contractors", "contractor"],
      "invoice": ["invoice", "billing record", "bill", "invoices", "invoiced", "billed", "billing"]
    },
    "resolution_rules": {
      "fuzzy_threshold": 0.85,
      "prefer_student_if_ambiguous": true,
      "max_candidates_returned": 5
    }
  },

  "metrics": {
    "cost": {
      "synonyms": ["spend", "burn", "charges", "billing", "amount", "money", "total cost", "expense", "billed", "charged", "paid", "compensated", "remitted", "paying"],
      "sql_column": "cost"
    },
    "hours": {
      "synonyms": ["time", "coverage", "time worked", "service hours", "shift time", "shift", "shifts"],
      "sql_column": "hours"
    },
    "caseload": {
      "synonyms": ["time", "coverage", "time worked", "service hours", "shift time", "shift", "shifts", "cover"],
      "sql_column": "hours"
    }
  },

  "time_windows": {
    "school_year_boundaries": {
      "start_month": 7,
      "end_month": 6
    },
    "named_windows": {
      "this_school_year": ["this school year", "this SY", "current SY", "this year", "current year", "for the year"],
      "last_school_year": ["last school year", "previous SY", "previous school year", "previous year"],
      "ytd": ["year to date", "ytd", "through the year", "through today", "up until now", "until now"],
      "last_month": ["last month", "previous month"],
      "this_month": ["this month", "current month"],
      "fall": ["fall", "autumn"],
      "summer": ["summer"],
      "winter": ["winter"],
      "spring": ["spring"]
    },
    "season_mappings": {
      "fall": ["September", "October", "November"],
      "winter": ["December", "January", "February"],
      "spring": ["March", "April", "May"],
      "summer": ["June", "July", "August"]
    },
    "quarter_mappings": {
      "Q1": ["July", "August", "September"],
      "Q2": ["October", "November", "December"],
      "Q3": ["January", "February", "March"],
      "Q4": ["April", "May", "June"]
    }
  },

  "analytics_kinds": {
    "trend": ["trend", "trending", "increasing", "decreasing", "going up", "going down"],
    "summary": ["summary", "overview", "rollup"],
    "comparison": ["compare", "versus", "vs", "compare with"],
    "top": ["top", "highest", "most", "biggest", "largest"],
    "breakdown": ["breakdown", "by provider", "by clinician", "split by"],
    "caseload": ["caseload", "student load", "student count", "kids served", "students served"]
  },

  "plan_kinds": {
    "student_monthly_spend": {
      "intent_synonyms": [
        "spending for student",
        "student spend pattern",
        "how much the student costs",
        "monthly spend for student",
        "month by month spending",
        "cost history",
        "student spending trend",
        "student expenditure",
        "how much was spent each month",
        "how much do we spend",
        "what are the costs",
        "to see the cost",
        "how much we spent",
        "what we paid out",
        "total amount charged",
        "how much it cost us",
        "what the district was billed",
        "our billed amount",
        "the cost to the district",
        "total money out",
        "overall charges",
        "expenditures for this student",
        "expenditure totals",
        "how much was invoiced",
        "amount we were invoiced for",
        "amount reimbursed",
        "spending associated with this student",
        "the financial impact",
        "total dollar amount",
        "cost accumulation",
        "what we owe for these services",
        "charges tied to this student",
        "district expenses",
        "service costs",
        "program costs",
        "nursing cost for the month",
        "support cost",
        "cost load for this vendor",
        "billing total",
        "invoice total cost",
        "how much was charged against the PO",
        "burn rate for this student"
      ],
      "entity_role": "student",
      "metric": "cost",
      "requires_month": false,
      "supports_multi_entity": false
    },

    "student_monthly_hours": {
      "intent_synonyms": [
        "hours for student",
        "service hours by month",
        "student hours pattern",
        "monthly hours for student",
        "hours history",
        "student time spent",
        "how many hours each month",
        "service delivery hours",
        "hours trend for student",
        "I want to see how many hours",
        "i want to see how many hours we were billed",
        "how many hours did we pay for",
        "how many hours of service were provided",
        "total hours logged",
        "the amount of time spent on services",
        "hours delivered to the student",
        "time that was worked",
        "the service time recorded",
        "how many hours were performed",
        "time delivered during the period",
        "total instructional or nursing hours",
        "hours worked across the period",
        "all hours associated with this record",
        "the number of service hours",
        "how much time the provider spent",
        "billable hours for the service",
        "service duration in hours",
        "time on task recorded",
        "how many hours show up in the billing",
        "the accumulated work hours",
        "hours attributed to this student",
        "the total time supported"
      ],
      "entity_role": "student",
      "metric": "hours",
      "requires_month": false,
      "supports_multi_entity": false
    },

    "student_invoices": {
      "intent_synonyms": [
        "student invoice history",
        "invoices associated with student",
        "billing records for student",
        "all invoices for student",
        "invoice list for student",
        "student billing summary",
        "charges billed to student",
        "student invoice tracking",
        "invoices tied to this student",
        "which invoices belong to the student",
        "student billing activity",
        "billed amounts for this student",
        "all billing tied to this student",
        "student invoice summary",
        "student charges history",
        "invoices that reference this student",
        "billing submitted for this student",
        "what the vendor billed for the student",
        "student invoicing record",
        "billed services for this student",
        "invoice activity for the student",
        "all charges for this student",
        "the student’s billed services",
        "summary of invoices for this student",
        "invoice history for this student",
        "billing entries for this student",
        "the student’s billing file",
        "the student’s invoice log",
        "itemized invoices for this student",
        "all vendor invoices for this student",
        "bills associated with the student",
        "financial activity for this student",
        "billing tied to this student",
        "the student's financial record",
        "costs billed to the student",
        "charges submitted for this student",
        "student invoice file",
        "invoiced services for the student",
        "what was billed for student care",
        "monthly invoices for this student",
        "the student’s cost activity",
        "billing documents for the student",
        "invoice summary for this student",
        "all financial charges for the student",
        "billing overview for the student",
        "student-level billing information",
        "student-level invoice summary"
      ],
      "entity_role": "student",
      "metric": "cost",
      "supports_multi_entity": false
    },

    "vendor_monthly_spend": {
      "intent_synonyms": [
        "vendor spending pattern",
        "amount paid to vendor",
        "vendor cost history",
        "monthly vendor spend",
        "vendor charges over time",
        "agency cost trend",
        "spending by vendor",
        "vendor expenditure",
        "vendor financial summary",
        "how much we are paying this vendor",
        "vendor cost for the month",
        "total amount charged by the vendor",
        "what the vendor billed us",
        "monthly billing from the vendor",
        "vendor’s cost trend",
        "amount we owe this vendor",
        "vendor charges for this period",
        "total paid to this agency",
        "how much we spent with this vendor",
        "vendor financial impact",
        "vendor expenditure",
        "agency billing total",
        "what the agency charged us",
        "monthly burn rate for this vendor",
        "the vendor’s invoice totals",
        "agency cost pattern",
        "service provider cost summary",
        "vendor outflow amount",
        "total monthly vendor charges",
        "the vendor’s cost load",
        "how much was charged to the district",
        "vendor cost accumulation",
        "vendor billing volume",
        "how much this vendor is costing us",
        "vendor expense report",
        "the vendor’s spending footprint",
        "monthly cost associated with the vendor",
        "dollars paid to this vendor",
        "the vendor’s monthly invoice amount",
        "agency service charges",
        "how much we’ve been billed by this vendor",
        "vendor billing activity",
        "total cost attributed to this vendor",
        "vendor spend for services delivered"
      ],
      "entity_role": "vendor",
      "metric": "cost",
      "requires_month": false,
      "supports_multi_entity": false
    },

    "vendor_invoices": {
      "intent_synonyms": [
        "vendor invoices",
        "invoices from vendor",
        "billing history for vendor",
        "vendor billing record",
        "invoice list for vendor",
        "vendor invoice summary",
        "charges submitted by vendor",
        "vendor invoice history",
        "invoices from this vendor",
        "billing records for the vendor",
        "all invoices tied to this vendor",
        "which invoices came from the vendor",
        "vendor billing submissions",
        "vendor billing activity",
        "invoice list for the vendor",
        "the vendor's invoice file",
        "vendor billing documents",
        "invoices associated with this agency",
        "agency invoice history",
        "all charges submitted by the vendor",
        "vendor billing report",
        "records of what the vendor billed",
        "agency billing records",
        "invoices for that agency",
        "vendor charge records",
        "billed invoices from the vendor",
        "vendor invoice log",
        "all vendor-submitted invoices",
        "vendor financial documents",
        "billing files submitted by the vendor",
        "vendor invoice trail",
        "what invoices were submitted by the vendor",
        "vendor invoice tracking",
        "the vendor’s billed items",
        "invoice activity for this vendor",
        "vendor billing timeline"
      ],
      "entity_role": "vendor",
      "metric": "cost",
      "supports_multi_entity": false
    },

    "district_monthly_spend": {
      "intent_synonyms": [
        "district spending pattern",
        "total district cost",
        "district expenditure",
        "monthly district spend",
        "district spending history",
        "district-wide spending",
        "district financial summary",
        "how much the district paid",
        "district rollup spend",
        "district cost trend",
        "district expense history",
        "what the district was billed",
        "district invoice history",
        "invoices submitted to the district",
        "district billing records",
        "all invoices for the district",
        "billing activity for the district",
        "district invoice summary",
        "district billing timeline",
        "all district charges",
        "everything billed to the district",
        "district invoice log",
        "district-wide billing submissions",
        "invoice activity for the district",
        "district billing overview",
        "how many invoices we received",
        "district invoice tracking",
        "what has been invoiced so far",
        "charges submitted across the district",
        "district billing activity",
        "records of invoices submitted to us",
        "district invoice submission list"
      ],
      "entity_role": "district",
      "metric": "cost",
      "supports_multi_entity": false
    },

    "comparison": {
      "intent_synonyms": [
        "compare",
        "compare these",
        "versus",
        "vs",
        "compare with",
        "difference between",
        "difference between two students",
        "how do they compare",
        "side by side comparison",
        "compare costs",
        "compare hours",
        "comparison analysis",
        "compare these two",
        "how do these compare",
        "compare them side by side",
        "which one is higher",
        "who cost more",
        "who had more hours",
        "which student required more support",
        "show the difference",
        "compare their totals",
        "stack them next to each other",
        "who had the bigger number",
        "who had the higher spend",
        "who had the lower spend",
        "compare the providers",
        "compare students",
        "which one was more expensive",
        "compare hours between them",
        "cost comparison",
        "hours comparison",
        "what’s the difference in cost",
        "what’s the difference in hours",
        "which student had more hours",
        "which one used more resources",
        "who had greater usage",
        "compare their service levels",
        "how they differ",
        "show me the variance",
        "show the delta",
        "compare their monthly values",
        "compare totals across months",
        "how do their numbers stack up",
        "rank them against each other",
        "what is the relative difference"
      ],
      "metric": "cost",
      "supports_multi_entity": true
    },

    "trend": {
      "intent_synonyms": [
        "trend",
        "how is it trending",
        "increasing over time",
        "decreasing over time",
        "is it going up or down",
        "trend analysis",
        "pattern over time",
        "directional change",
        "trajectory",
        "what does the pattern look like",
        "are things increasing",
        "are things decreasing",
        "is there an upward trend",
        "is there a downward trend",
        "show the trend line",
        "movement over time",
        "progression over time",
        "how it changed month to month",
        "how it's been shifting",
        "how the numbers evolved",
        "how usage has changed",
        "is it rising or falling",
        "change over the months",
        "changes across the year",
        "is it trending up",
        "is it trending down",
        "is it stable or shifting",
        "rate of change",
        "month-to-month movement",
        "how things are moving",
        "historical pattern",
        "past trend",
        "look at the change pattern",
        "what’s the directional trend",
        "long-term movement",
        "over time movement",
        "time-based pattern",
        "does it show growth",
        "does it show decline",
        "how does the curve look",
        "is there consistent growth",
        "is there a drop-off",
        "is there an increase each period",
        "is there a decrease each period",
        "how is it changing"
      ],
      "metric": "hours",
      "supports_multi_entity": true
    },

    "top_invoices": {
      "intent_synonyms": [
        "largest invoices",
        "highest value invoices",
        "most expensive invoices",
        "invoice ranking",
        "biggest billed amounts",
        "top spending invoices",
        "invoice cost leaders",
        "largest costs",
        "invoice leaderboard",
        "top invoices",
        "show the biggest invoices",
        "show the highest invoices",
        "which invoices cost the most",
        "highest spending invoices",
        "top billed invoices",
        "invoices with the highest totals",
        "largest invoice totals",
        "biggest invoices of the month",
        "invoices that hit budget the hardest",
        "invoices with the largest charges",
        "highest dollar invoices",
        "the heaviest invoices",
        "top charges",
        "high-impact invoices",
        "which invoices were the most expensive",
        "which invoices were the largest",
        "costliest invoices",
        "top 10 invoices",
        "highest cost bills",
        "biggest district expenses",
        "largest vendor charges",
        "ranking of invoices",
        "invoice ranking by cost",
        "bills with the highest amounts",
        "invoices with the biggest cost",
        "the top billed amounts",
        "top invoice list",
        "Invoices that cost the most"
      ],
      "entity_role": "invoice",
      "metric": "cost",
      "ranked": true,
      "supports_multi_entity": false
    },

    "caseload": {
      "intent_synonyms": [
        "how many students they serve",
        "size of their caseload",
        "number of kids supported",
        "student load for clinician",
        "kids they work with",
        "which students they support",
        "students served count",
        "caseload summary",
        "caseload analysis",
        "students on their list",
        "who they are assigned to",
        "who is on their caseload",
        "their roster of students",
        "the students they cover",
        "their student assignments",
        "how many kids they cover",
        "their workload",
        "how many students they’re responsible for",
        "coverage list",
        "their assigned students",
        "students under their care",
        "their service roster",
        "their student panel",
        "who they provided services to",
        "their current caseload count",
        "caseload distribution",
        "how many students they supported this month",
        "total students served",
        "their student group",
        "how many students fall under them",
        "student roster for clinician",
        "students they were responsible for",
        "kids on their caseload",
        "who they covered",
        "student assignments for clinician",
        "their served population",
        "roster count",
        "caseload count",
        "students they had this month",
        "children they supported",
        "caseload size",
        "how many students were on their list",
        "who they supported",
        "student coverage list",
        "caseload by clinician",
        "headcount for clinician",
        "students included in their caseload",
        "student assignments list",
        "their service load",
        "service population for clinician",
        "how many students"
      ],
      "entity_role": "clinician",
      "metric": "caseload",
      "supports_multi_entity": false
    }
  },

  "router_modes": {
    "student_monthly": {
      "triggers": [
        "each month",
        "per month",
        "by month",
        "month to month",
        "month over month",
        "month-by-month",
        "monthly totals",
        "monthly breakdown",
        "monthly summary",
        "monthly view"
      ],
      "primary_entity": "student"
    },
    "provider_monthly": {
      "triggers": [
        "provider monthly",
        "clinician monthly",
        "provider hours monthly",
        "clinician hours monthly",
        "hours per month",
        "each month by provider",
        "per month by provider",
        "month over month by provider",
        "monthly provider totals",
        "monthly clinician totals"
      ],
      "primary_entity": "clinician"
    },
    "student_provider_breakdown": {
      "triggers": [
        "who worked with",
        "providers for",
        "providers who worked with",
        "providers that worked with",
        "which clinicians",
        "who supported",
        "who provided services",
        "clinician breakdown",
        "provider breakdown",
        "provider list for"
      ],
      "primary_entity": "student"
    },
    "district_monthly": {
      "triggers": [
        "district monthly",
        "district summary",
        "district totals by month",
        "district month-over-month",
        "district spending monthly",
        "district cost monthly",
        "monthly district totals",
        "district monthly breakdown",
        "district monthly view",
        "district month to month"
      ],
      "primary_entity": "district"
    },
    "vendor_monthly": {
      "triggers": [
        "vendor monthly",
        "agency monthly",
        "monthly vendor totals",
        "monthly agency totals",
        "vendor spend monthly",
        "agency spend monthly",
        "vendor month-to-month",
        "vendor month over month",
        "vendor cost monthly",
        "monthly vendor view"
      ],
      "primary_entity": "vendor"
    },
    "top_invoices": {
      "triggers": [
        "top invoices",
        "highest invoices",
        "biggest invoices",
        "top 10 invoices",
        "top invoice list",
        "invoice ranking",
        "rank invoices",
        "highest cost invoices",
        "largest invoices",
        "invoice leaderboard"
      ],
      "primary_entity": "invoice"
    },
    "invoice_details": {
      "triggers": [
        "invoice number",
        "details for invoice",
        "invoice details",
        "show invoice details",
        "breakdown for invoice",
        "line item detail",
        "line items for invoice",
        "show line items",
        "detail this invoice",
        "invoice line items"
      ],
      "primary_entity": "invoice"
    },
    "provider_caseload_monthly": {
      "triggers": [
        "caseload",
        "student load",
        "student count",
        "how many students",
        "how many kids",
        "kids served",
        "students served",
        "students seen",
        "students supported",
        "provider caseload"
      ],
      "primary_entity": "clinician"
    }
  },

  "materialized_views": {
    "mv_student_monthly_hours_cost": {
      "purpose": "Student hours + cost per month",
      "columns": ["district_key", "student", "service_year", "service_month_num", "service_month", "total_hours", "total_cost"]
    },
    "mv_provider_monthly_hours_cost": {
      "purpose": "Provider hours + cost per month",
      "columns": ["district_key", "clinician", "service_year", "service_month_num", "service_month", "total_hours", "total_cost"]
    },
    "mv_student_provider_monthly": {
      "purpose": "Student × Provider breakdown per month",
      "columns": ["district_key", "student", "clinician", "service_year", "service_month_num", "service_month", "total_hours", "total_cost"]
    },
    "mv_district_monthly_hours_cost": {
      "purpose": "District-wide hours and cost per month",
      "columns": ["district_key", "service_year", "service_month_num", "service_month", "total_hours", "total_cost"]
    },
    "mv_vendor_monthly_hours_cost": {
      "purpose": "Vendor × month hours and cost",
      "columns": ["district_key", "vendor_id", "vendor_name", "service_year", "service_month_num", "service_month", "total_hours", "total_cost"]
    },
    "mv_invoice_summary": {
      "purpose": "Invoice-level totals",
      "columns": ["invoice_id", "district_key", "invoice_date", "total_hours", "total_cost", "num_students", "num_clinicians"]
    },
    "mv_student_daily_hours": {
      "purpose": "Daily hours per student",
      "columns": ["district_key", "student", "service_date", "total_hours", "total_cost"]
    },
    "mv_provider_caseload_monthly": {
      "purpose": "Clinician caseload (#students) + hours per month",
      "columns": ["district_key", "clinician", "service_year", "service_month_num", "service_month", "num_students", "total_hours", "total_cost"]
    }
  },

  "mode_to_mv_map": {
    "student_monthly": "mv_student_monthly_hours_cost",
    "provider_monthly": "mv_provider_monthly_hours_cost",
    "student_provider_breakdown": "mv_student_provider_monthly",
    "district_summary": "mv_district_monthly_hours_cost",
    "district_monthly": "mv_district_monthly_hours_cost",
    "vendor_monthly": "mv_vendor_monthly_hours_cost",
    "top_invoices": "mv_invoice_summary",
    "provider_caseload_monthly": "mv_provider_caseload_monthly"
  },

  "validation": {
    "allowed_invoice_columns": [
      "id",
      "student_name",
      "invoice_number",
      "service_month",
      "invoice_date",
      "total_cost",
      "district_key",
      "service_year",
      "service_month_num"
    ],
    "allowed_line_item_columns": [
      "student",
      "clinician",
      "service_code",
      "hours",
      "cost",
      "service_date"
    ],
    "disallowed_patterns": [
      "amount_due",
      "invoice_amount",
      "balance_due",
      "payment_due"
    ]
  },

  "insights": {
    "templates": {
      "increasing_trend": "{entity} is trending upward with {metric} increasing from {oldest} to {newest}.",
      "decreasing_trend": "{entity} is trending downward with {metric} falling from {oldest} to {newest}.",
      "high_month": "{entity} had the highest {metric} in {month}.",
      "low_month": "{entity} had the lowest {metric} in {month}."
    }
  }
}
